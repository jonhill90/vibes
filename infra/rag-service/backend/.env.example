# RAG Service Environment Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://rag_user:rag_password@postgres:5432/rag_db

# Database connection pool settings
DATABASE_POOL_MIN_SIZE=2
DATABASE_POOL_MAX_SIZE=10

# =============================================================================
# QDRANT VECTOR DATABASE
# =============================================================================
# Qdrant server URL
QDRANT_URL=http://qdrant:6333

# Collection name for vector storage
QDRANT_COLLECTION_NAME=rag_documents

# =============================================================================
# OPENAI API CONFIGURATION
# =============================================================================
# OpenAI API key (required for embeddings)
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-api-key-here

# Embedding model configuration
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_EMBEDDING_DIMENSION=1536

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
# FastAPI server port
API_PORT=8001

# MCP server port for agent tools
MCP_PORT=8052

# CORS origins (comma-separated, empty = development defaults)
# Development defaults: http://localhost:3000,http://localhost:5173,http://localhost:5174
CORS_ORIGINS=

# =============================================================================
# SEARCH CONFIGURATION
# =============================================================================
# Enable hybrid search (vector + full-text BM25)
# When enabled: Combines vector similarity (70%) with BM25 text search (30%)
# When disabled: Uses vector similarity search only
# Performance: Vector-only <50ms p95, Hybrid <100ms p95
USE_HYBRID_SEARCH=false

# Hybrid search weights (must sum to 1.0)
HYBRID_VECTOR_WEIGHT=0.7
HYBRID_TEXT_WEIGHT=0.3

# Candidate multiplier for hybrid reranking (fetch limit * multiplier)
HYBRID_CANDIDATE_MULTIPLIER=5

# Minimum similarity threshold for search results
SIMILARITY_THRESHOLD=0.05

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
# Number of texts to embed per OpenAI API call (batch processing)
EMBEDDING_BATCH_SIZE=100

# =============================================================================
# DOCUMENT CHUNKING CONFIGURATION
# =============================================================================
# Target token count per chunk
CHUNK_SIZE=500

# Token overlap between consecutive chunks
CHUNK_OVERLAP=50
